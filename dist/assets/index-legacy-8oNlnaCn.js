System.register(["./index-legacy-CEYQ8_qR.js","./use-scope-id-legacy-BEJGkPEQ.js","./interceptor-legacy-DIcPwnYS.js"],(function(e,o){"use strict";var t,n,a,s,l,r,c,i,u,d,v,p,y,f,m,h,b,w,I,O,k,x,C,g,S,z,B,j,A,P,L,T,E,R,D,H,N,V;return{setters:[e=>{t=e.z,n=e.ad,a=e.Q,s=e.O,l=e.M,r=e.N,c=e.j,i=e.aV,u=e.ap,d=e.r,v=e.d,p=e.v,y=e.W,f=e.h,m=e.aQ,h=e.aW,b=e.q,w=e.V,I=e.a4,O=e.ab,k=e.ai,x=e.D,C=e.T,g=e.o,S=e.a1,z=e.av,B=e.aX,j=e.x,A=e.A,P=e.H,L=e.I,T=e.C,E=e.aj,R=e.aY},e=>{D=e.a,H=e.u,N=e.b},e=>{V=e.c}],execute:function(){const o=e("a",{show:Boolean,zIndex:a,overlay:t,duration:a,teleport:[String,Object],lockScroll:t,lazyRender:t,beforeClose:Function,overlayStyle:Object,overlayClass:n,transitionAppear:Boolean,closeOnClickOverlay:t});e("p",Object.keys(o));let $=0;const Q="van-overflow-hidden";function W(e){const o=d(!1);return c(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}const[Y,q]=p("overlay"),F={show:Boolean,zIndex:a,duration:a,className:n,lockScroll:t,lazyRender:t,customStyle:Object,teleport:[String,Object]};var K=v({name:Y,props:F,setup(e,{slots:o}){const t=d(),n=W((()=>e.show||!e.lazyRender))((()=>{var n;const a=b(w(e.zIndex),e.customStyle);return I(e.duration)&&(a.animationDuration=`${e.duration}s`),O(f("div",{ref:t,style:a,class:[q(),e.className]},[null==(n=o.default)?void 0:n.call(o)]),[[k,e.show]])}));return y("touchmove",(o=>{e.lockScroll&&u(o,!0)}),{target:t}),()=>{const o=f(m,{name:"van-fade",appear:!0},{default:n});return e.teleport?f(h,{to:e.teleport},{default:()=>[o]}):o}}});const M=x(K),X=b({},o,{round:Boolean,position:A("center"),closeIcon:A("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:A("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[G,J]=p("popup");var U=v({name:G,inheritAttrs:!1,props:X,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:o,attrs:t,slots:n}){let a,v;const p=d(),b=d(),w=W((()=>e.show||!e.lazyRender)),x=C((()=>{const o={zIndex:p.value};return I(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`),o})),A=()=>{a||(a=!0,p.value=void 0!==e.zIndex?+e.zIndex:B(),o("open"))},Y=()=>{a&&V(e.beforeClose,{done(){a=!1,o("close"),o("update:show",!1)}})},q=t=>{o("clickOverlay",t),e.closeOnClickOverlay&&Y()},F=()=>{if(e.overlay)return f(M,j({show:e.show,class:e.overlayClass,zIndex:p.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},N(),{onClick:q}),{default:n["overlay-content"]})},K=e=>{o("clickCloseIcon",e),Y()},X=()=>{if(e.closeable)return f(L,{role:"button",tabindex:0,name:e.closeIcon,class:[J("close-icon",e.closeIconPosition),P],classPrefix:e.iconPrefix,onClick:K},null)};let G;const U=()=>{G&&clearTimeout(G),G=setTimeout((()=>{o("opened")}))},Z=()=>o("closed"),_=e=>o("keydown",e),ee=w((()=>{var o;const{destroyOnClose:a,round:s,position:l,safeAreaInsetTop:r,safeAreaInsetBottom:c,show:i}=e;if(i||!a)return O(f("div",j({ref:b,style:x.value,role:"dialog",tabindex:0,class:[J({round:s,[l]:l}),{"van-safe-area-top":r,"van-safe-area-bottom":c}],onKeydown:_},t,N()),[null==(o=n.default)?void 0:o.call(n),X()]),[[k,i]])})),oe=()=>{const{position:o,transition:t,transitionAppear:n}=e;return f(m,{name:t||("center"===o?"van-fade":`van-popup-slide-${o}`),appear:n,onAfterEnter:U,onAfterLeave:Z},{default:ee})};return c((()=>e.show),(e=>{e&&!a&&(A(),0===t.tabindex&&T((()=>{var e;null==(e=b.value)||e.focus()}))),!e&&a&&(a=!1,o("close"))})),H({popupRef:b}),function(e,o){const t=D(),n=o=>{t.move(o);const n=t.deltaY.value>0?"10":"01",a=i(o.target,e.value),{scrollHeight:s,offsetHeight:l,scrollTop:r}=a;let c="11";0===r?c=l>=s?"00":"01":r+l>=s&&(c="10"),"11"===c||!t.isVertical()||parseInt(c,2)&parseInt(n,2)||u(o,!0)},a=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",n,{passive:!1}),$||document.body.classList.add(Q),$++},d=()=>{$&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",n),$--,$||document.body.classList.remove(Q))},v=()=>o()&&d();s((()=>o()&&a())),l(v),r(v),c(o,(e=>{e?a():d()}))}(b,(()=>e.show&&e.lockScroll)),y("popstate",(()=>{e.closeOnPopstate&&(Y(),v=!1)})),g((()=>{e.show&&A()})),S((()=>{v&&(o("update:show",!0),v=!1)})),l((()=>{e.show&&e.teleport&&(Y(),v=!0)})),E(R,(()=>e.show)),()=>e.teleport?f(h,{to:e.teleport},{default:()=>[F(),oe()]}):f(z,null,[F(),oe()])}});e("P",x(U))}}}));
