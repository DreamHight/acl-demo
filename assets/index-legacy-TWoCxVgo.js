System.register(["./index-legacy-PtYDHDO6.js","./use-scope-id-legacy-D9Qp_6Ri.js","./interceptor-legacy-Dk8ZT6sD.js"],(function(e,o){"use strict";var t,n,a,s,l,r,c,i,u,d,v,p,y,f,m,h,w,I,O,b,k,x,g,C,S,z,B,j,A,L,P,E,R,T,D,N,$,F;return{setters:[e=>{t=e.K,n=e.al,a=e.Z,s=e.X,l=e.V,r=e.W,c=e.y,i=e.aW,u=e.at,d=e.r,v=e.d,p=e.E,y=e.a3,f=e.j,m=e.aR,h=e.aX,w=e.D,I=e.a2,O=e.ad,b=e.k,k=e.v,x=e.O,g=e.a0,C=e.o,S=e.aa,z=e.F,B=e.aY,j=e.G,A=e.L,L=e.J,P=e.I,E=e.N,R=e.ao,T=e.aZ},e=>{D=e.a,N=e.u,$=e.b},e=>{F=e.c}],execute:function(){const o=e("a",{show:Boolean,zIndex:a,overlay:t,duration:a,teleport:[String,Object],lockScroll:t,lazyRender:t,beforeClose:Function,overlayStyle:Object,overlayClass:n,transitionAppear:Boolean,closeOnClickOverlay:t});e("p",Object.keys(o));let H=0;const K="van-overflow-hidden";function V(e){const o=d(!1);return c(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}const[W,X]=p("overlay"),Y={show:Boolean,zIndex:a,duration:a,className:n,lockScroll:t,lazyRender:t,customStyle:Object,teleport:[String,Object]};var Z=v({name:W,props:Y,setup(e,{slots:o}){const t=d(),n=V((()=>e.show||!e.lazyRender))((()=>{var n;const a=w(I(e.zIndex),e.customStyle);return O(e.duration)&&(a.animationDuration=`${e.duration}s`),b(f("div",{ref:t,style:a,class:[X(),e.className]},[null==(n=o.default)?void 0:n.call(o)]),[[k,e.show]])}));return y("touchmove",(o=>{e.lockScroll&&u(o,!0)}),{target:t}),()=>{const o=f(m,{name:"van-fade",appear:!0},{default:n});return e.teleport?f(h,{to:e.teleport},{default:()=>[o]}):o}}});const G=x(Z),J=w({},o,{round:Boolean,position:A("center"),closeIcon:A("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:A("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[q,M]=p("popup");var Q=v({name:q,inheritAttrs:!1,props:J,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:o,attrs:t,slots:n}){let a,v;const p=d(),w=d(),I=V((()=>e.show||!e.lazyRender)),x=g((()=>{const o={zIndex:p.value};return O(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`),o})),A=()=>{a||(a=!0,p.value=void 0!==e.zIndex?+e.zIndex:B(),o("open"))},W=()=>{a&&F(e.beforeClose,{done(){a=!1,o("close"),o("update:show",!1)}})},X=t=>{o("clickOverlay",t),e.closeOnClickOverlay&&W()},Y=()=>{if(e.overlay)return f(G,j({show:e.show,class:e.overlayClass,zIndex:p.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},$(),{onClick:X}),{default:n["overlay-content"]})},Z=e=>{o("clickCloseIcon",e),W()},J=()=>{if(e.closeable)return f(P,{role:"button",tabindex:0,name:e.closeIcon,class:[M("close-icon",e.closeIconPosition),L],classPrefix:e.iconPrefix,onClick:Z},null)};let q;const Q=()=>{q&&clearTimeout(q),q=setTimeout((()=>{o("opened")}))},U=()=>o("closed"),_=e=>o("keydown",e),ee=I((()=>{var o;const{destroyOnClose:a,round:s,position:l,safeAreaInsetTop:r,safeAreaInsetBottom:c,show:i}=e;if(i||!a)return b(f("div",j({ref:w,style:x.value,role:"dialog",tabindex:0,class:[M({round:s,[l]:l}),{"van-safe-area-top":r,"van-safe-area-bottom":c}],onKeydown:_},t,$()),[null==(o=n.default)?void 0:o.call(n),J()]),[[k,i]])})),oe=()=>{const{position:o,transition:t,transitionAppear:n}=e;return f(m,{name:t||("center"===o?"van-fade":`van-popup-slide-${o}`),appear:n,onAfterEnter:Q,onAfterLeave:U},{default:ee})};return c((()=>e.show),(e=>{e&&!a&&(A(),0===t.tabindex&&E((()=>{var e;null==(e=w.value)||e.focus()}))),!e&&a&&(a=!1,o("close"))})),N({popupRef:w}),function(e,o){const t=D(),n=o=>{t.move(o);const n=t.deltaY.value>0?"10":"01",a=i(o.target,e.value),{scrollHeight:s,offsetHeight:l,scrollTop:r}=a;let c="11";0===r?c=l>=s?"00":"01":r+l>=s&&(c="10"),"11"===c||!t.isVertical()||parseInt(c,2)&parseInt(n,2)||u(o,!0)},a=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",n,{passive:!1}),H||document.body.classList.add(K),H++},d=()=>{H&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",n),H--,H||document.body.classList.remove(K))},v=()=>o()&&d();s((()=>o()&&a())),l(v),r(v),c(o,(e=>{e?a():d()}))}(w,(()=>e.show&&e.lockScroll)),y("popstate",(()=>{e.closeOnPopstate&&(W(),v=!1)})),C((()=>{e.show&&A()})),S((()=>{v&&(o("update:show",!0),v=!1)})),l((()=>{e.show&&e.teleport&&(W(),v=!0)})),R(T,(()=>e.show)),()=>e.teleport?f(h,{to:e.teleport},{default:()=>[Y(),oe()]}):f(z,null,[Y(),oe()])}});e("P",x(Q))}}}));
