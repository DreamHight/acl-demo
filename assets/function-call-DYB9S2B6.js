import{m as I,u as B}from"./mount-component-Cp9N8zCC.js";import{d as z,Z as g,al as C,L as k,aP as T,E as L,y as v,o as M,z as N,i as s,G as h,H as U,I as j,ad as D,U as H,D as O,aK as V,r as q,ak as E}from"./index-C0f17wBw.js";import{P as G}from"./index-LdOxuNnR.js";import{L as K}from"./index-Dim25KD3.js";let f=0;function Z(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[_,i]=L("toast"),A=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],F={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:g,iconSize:g,duration:T(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:C,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:C,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:g};var J=z({name:_,props:F,emits:["update:show"],setup(e,{emit:o,slots:a}){let l,c=!1;const r=()=>{const t=e.show&&e.forbidClick;c!==t&&(c=t,Z(c))},d=t=>o("update:show",t),y=()=>{e.closeOnClick&&d(!1)},u=()=>clearTimeout(l),b=()=>{const{icon:t,type:n,iconSize:p,iconPrefix:P,loadingType:x}=e;if(t||n==="success"||n==="fail")return s(j,{name:t||n,size:p,class:i("icon"),classPrefix:P},null);if(n==="loading")return s(K,{class:i("loading"),size:p,type:x},null)},S=()=>{const{type:t,message:n}=e;if(a.message)return s("div",{class:i("text")},[a.message()]);if(D(n)&&n!=="")return t==="html"?s("div",{key:0,class:i("text"),innerHTML:String(n)},null):s("div",{class:i("text")},[n])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(l=setTimeout(()=>{d(!1)},e.duration))}),M(r),N(r),()=>s(G,h({class:[i([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:u,"onUpdate:show":d},U(e,A)),{default:()=>[b(),S()]})}});const Q={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let m=[],R=!1,w=O({},Q);const W=new Map;function X(e){return V(e)?e:{message:e}}function Y(){const{instance:e}=I({setup(){const o=q(""),{open:a,state:l,close:c,toggle:r}=B(),d=()=>{},y=()=>s(J,h(l,{onClosed:d,"onUpdate:show":r}),null);return v(o,u=>{l.message=u}),E().render=y,{open:a,close:c,message:o}}});return e}function $(){if(!m.length||R){const e=Y();m.push(e)}return m[m.length-1]}function se(e={}){if(!H)return{};const o=$(),a=X(e);return o.open(O({},w,W.get(a.type||w.type),a)),o}export{se as s};
